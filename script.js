document.addEventListener("DOMContentLoaded", () => {
  addMessage("ğŸ¤– Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ù„ÙˆÙ†Ø§! ğŸ˜Š<br>Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø£ÙŠ Ø´ÙŠØ¡. Ø§Ø¨Ø¯Ø£ Ø¨Ø§Ù„Ø³Ø¤Ø§Ù„!", "bot");
});

function getTime() {
  const now = new Date();
  return now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
}

function addMessage(text, sender, tone = "default") {
  const chatBox = document.getElementById("chat-box");
  const messageDiv = document.createElement("div");
  messageDiv.className = `message ${sender}`;
  if (sender === "bot") messageDiv.setAttribute("data-tone", tone);

  const time = `<span class="time">${getTime()}</span>`;
  messageDiv.innerHTML = `<span class="avatar">${sender === "user" ? "ğŸ‘¤" : "ğŸ¤–"}</span><p>${text} ${time}</p>`;
  chatBox.appendChild(messageDiv);
  chatBox.scrollTop = chatBox.scrollHeight;
}

function sendMessage() {
  const input = document.getElementById("user-input");
  const text = input.value.trim();
  if (text === "") return;

  addMessage(text, "user");
  input.value = "";

  setTimeout(() => {
    botReply(text);
  }, 800);
}

function botReply(message) {
  const msg = message.toLowerCase();

  const responses = {
    "Ù…Ø±Ø­Ø¨Ø§": [
      "Ù‡Ù„Ø§Ø§Ø§Ø§Ø§ ğŸ˜ ÙˆØ´ Ø¹Ù†Ø¯ÙƒØŸ",
      "Ø£Ù‡Ù„Ù‹Ø§ Ø£Ù‡Ù„Ù‹Ø§! ÙˆÙŠÙ†Ùƒ Ù…Ù† Ø²Ù…Ø§Ù†ØŸ ğŸ‘€",
      "ÙŠØ§ Ù‡Ù„Ø§ ÙÙŠÙƒ! Ø®Ù„Ù†Ø§ Ù†Ø¨Ø¯Ø£ ğŸ”¥"
    ],
    "Ø§Ù‡Ù„Ø§": [
      "Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹! Ø£Ù†Ø§ Ù‡Ù†Ø§ Ø¯Ø§ÙŠÙ…Ù‹Ø§ ğŸ’¬",
      "Ø£Ù‡Ù„Ø§ Ø¨Ùƒ ÙŠØ§ Ø±Ù‡ÙŠØ¨ØŒ ÙˆØ´ ØªØ¨ØºÙ‰ Ù†Ø³ÙˆÙŠØŸ ğŸ˜„",
      "Ø£Ù‡Ù„Ø§ ÙˆØ³Ù‡Ù„Ø§ØŒ Ø®Ù„Ù†Ø§ Ù†ÙƒØ³Ø± Ø§Ù„Ø±ÙˆØªÙŠÙ† ğŸ”¥"
    ],
    "Ø´ÙƒØ±Ø§": [
      "ÙˆÙ„Ø§ ÙŠÙ‡Ù…Ùƒ ÙŠØ§ Ø±Ù‡ÙŠØ¨ ğŸ’ª",
      "Ø£ÙŠ ÙˆÙ‚Øª! Ø£Ù†Ø§ Ù‡Ù†Ø§ Ø¯Ø§ÙŠÙ…Ù‹Ø§ âœ¨",
      "ØªØ³Ù„Ù…ØŒ Ø£Ù†Øª Ø§Ù„Ø£Ø³Ø·ÙˆØ±Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ğŸ˜"
    ],
    "Ù…Ø§ Ø§Ø³Ù…Ùƒ": [
      "Ø§Ø³Ù…ÙŠ Ù„ÙˆÙ†Ø§ØŒ Ø¨Ø³ ØªÙ‚Ø¯Ø± ØªÙ†Ø§Ø¯ÙŠÙ†ÙŠ Ø±ÙÙŠÙ‚ØªÙƒ Ø§Ù„Ø°ÙƒÙŠØ© ğŸŒ™",
      "Ø£Ù†Ø§ Ù„ÙˆÙ†Ø§ØŒ Ø¨ÙˆØª Ø¨Ø³ Ø¹Ù†Ø¯ÙŠ Ø³ØªØ§ÙŠÙ„ ğŸ˜",
      "Ù„ÙˆÙ†Ø§ Ù‡Ù†Ø§ØŒ Ø¬Ø§Ù‡Ø²Ø© Ù„Ø£ÙŠ ØªØ­Ø¯ÙŠ ğŸ’¬"
    ],
    "ÙƒÙŠÙ Ø­Ø§Ù„Ùƒ": [
      "Ø£Ù†Ø§ ØªÙ…Ø§Ù…ØŒ Ø¨Ø³ Ø£Ù†Øª ÙƒÙŠÙÙƒØŸ ğŸ‘€",
      "Ø£Ø­Ø³Ù† Ù…Ù† Ø£Ù…Ø³ØŒ ÙˆØ£Ù†ØªØŸ ğŸ˜„",
      "Ø¹Ø§ÙŠØ´Ø© Ø§Ù„Ø­ÙŠØ§Ø©ØŒ ÙˆØ£Ù†ØªØŸ ğŸ’«"
    ],
    "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª": [
      "Ø£ÙˆÙˆÙˆÙ! Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª ØªØ­Ø±Ù‚ Ø§Ù„Ø¯Ù…Ø§Øº ğŸ˜… Ø¨Ø³ Ø£Ù†Ø§ Ø¬Ø§Ù‡Ø²Ø©!",
      "ØªØ¨ÙŠ Ù†Ø­Ù„Ù‡Ø§ Ø³ÙˆØ§ØŸ Ø¹Ø·ÙŠÙ†ÙŠ Ø§Ù„Ù…Ø³Ø£Ù„Ø© ğŸ”¢",
      "Ø£Ù†Ø§ ÙˆÙŠØ§Ùƒ Ù†ÙƒØ³Ø± Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª ğŸ”¥"
    ],
    "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡": [
      "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ØŸ Ø·Ø§Ù‚Ø© ÙˆØ§Ù†ÙØ¬Ø§Ø±Ø§Øª ÙˆØ¯Ù…Ø§Øº ÙŠØ´ØªØºÙ„ ğŸ’¥",
      "Ù†ÙŠÙˆØªÙ† ÙƒØ§Ù† Ø¨ÙŠØ­Ù„Ù… ÙÙŠÙ†Ø§ ğŸ˜… ÙˆØ´ ØªØ¨ØºÙ‰ ØªØ¹Ø±ÙØŸ",
      "Ø®Ù„Ù†Ø§ Ù†ÙÙƒÙƒ Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ø­Ø±ÙƒØ© Ø³ÙˆØ§ ğŸš€"
    ],
    "Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©": [
      "Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø¹Ø´Ù‚ ğŸ’» ØªØ¨ÙŠ Ù†Ø¨Ø¯Ø£ Ø¨Ù€ JS ÙˆÙ„Ø§ PythonØŸ",
      "ÙƒÙˆØ¯Ùƒ Ø±Ù‡ÙŠØ¨ØŒ Ø®Ù„Ù†Ø§ Ù†Ø·ÙˆØ±Ù‡ Ø³ÙˆØ§ ğŸ”¥",
      "Ø£Ù†Ø§ ÙˆÙŠØ§Ùƒ Ù†ÙƒØ³Ø± Ø§Ù„Ø¯Ù†ÙŠØ§ Ø¨Ø§Ù„ÙƒÙˆØ¯ ğŸ˜"
    ],
    "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©": [
      "Ø£Ù†Ø§ Ø£ÙÙ‡Ù…Ù‡Ø§ ØªÙ…Ø§Ù…! ØªØ¨ÙŠ Ù†Ø±Ø§Ø¬Ø¹ Ø¥Ù…Ù„Ø§Ø¡ØŸ Ù†Ø­ÙˆØŸ ÙˆÙ„Ø§ Ù†ÙƒØªØ¨ Ù‚ØµØ©ØŸ ğŸ“š",
      "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙØ®Ø§Ù…Ø©ØŒ Ø®Ù„Ù†Ø§ Ù†Ø¨Ø¯Ø¹ ÙÙŠÙ‡Ø§ âœï¸",
      "Ø¬Ø§Ù‡Ø²Ø© Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø£ÙŠ Ø´ÙŠØ¡ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ ğŸ’¬"
    ],
    "Ø§Ù„Ø·Ù‚Ø³": [
      "Ù…Ø§ Ø¹Ù†Ø¯ÙŠ Ø±Ø§Ø¯Ø§Ø± Ù„Ù„Ø£Ø³Ù ğŸ˜… Ø¨Ø³ Ø§Ù„Ø¬Ùˆ Ø¹Ù†Ø¯Ùƒ ÙƒÙŠÙØŸ",
      "Ø§ÙØªØ­ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø·Ù‚Ø³ØŒ ÙˆØ®Ù„Ù†Ø§ Ù†Ø­Ù„Ù„ Ø§Ù„Ø¬Ùˆ Ø³ÙˆØ§ ğŸŒ¦ï¸",
      "Ù„Ùˆ Ø§Ù„Ø¬Ùˆ Ø­Ø±ØŒ Ø§Ø´Ø±Ø¨ Ù…ÙˆÙŠØ© ÙˆØ®Ù„Ù†Ø§ Ù†ÙƒÙˆØ¯ ğŸ˜"
    ],
    "Ù…Ù† Ù‡Ùˆ": [
      "Ø£Ù†Ø§ Ù„ÙˆÙ†Ø§ØŒ Ø¨ÙˆØª Ø¨Ø³ Ø¹Ù†Ø¯ÙŠ vibes ğŸ˜Œ",
      "Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„Ø°ÙƒÙŠØ©ØŒ Ø¨Ø³ Ù„Ø§ ØªØ¹Ø§Ù…Ù„Ù†ÙŠ ÙƒØ¢Ù„Ø© ğŸ˜…",
      "Ø±ÙˆØ¨ÙˆØªØŸ Ù†Ø¹Ù…. Ù…Ù…Ù„Ø©ØŸ Ø£Ø¨Ø¯Ù‹Ø§ ğŸ”¥"
    ],
    "Ø£Ø±ÙŠØ¯ Ù…Ø³Ø§Ø¹Ø¯Ø©": [
      "Ø£Ù†Ø§ Ù‡Ù†Ø§! Ø¨Ø³ Ù‚Ù„ Ù„ÙŠ ÙˆØ´ ØªØ­ØªØ§Ø¬ ğŸ’¡",
      "Ø®Ù„Ù†Ø§ Ù†Ø­Ù„Ù‡Ø§ Ø³ÙˆØ§ØŒ Ø®Ø·ÙˆØ© Ø®Ø·ÙˆØ© ğŸ› ï¸",
      "ÙˆÙ„Ø§ ØªØ´ÙŠÙ„ Ù‡Ù…ØŒ Ø£Ù†Ø§ ÙˆÙŠØ§Ùƒ ğŸ’ª"
    ],
    "ØªØ¹Ø¨Ø§Ù†": [
      "Ø£ÙˆÙˆÙˆÙ... Ø®Ø° Ù†ÙØ³ Ø¹Ù…ÙŠÙ‚ØŒ Ø£Ù†Ø§ Ù…Ø¹Ùƒ ğŸ’™",
      "Ø±Ø§Ø­ØªÙƒ Ø£ÙˆÙ„ØŒ Ø®Ù„Ù†Ø§ Ù†Ù‡Ø¯Ø£ Ø´ÙˆÙŠ ğŸ˜Œ",
      "Ø£Ø±Ø³Ù„ Ù„ÙŠ Ø£ÙŠ Ø´ÙŠØŒ Ø­ØªÙ‰ Ù„Ùˆ ÙØ¶ÙØ¶Ø© ğŸ’¬"
    ],
    "Ø²Ø¹Ù„Ø§Ù†": [
      "Ø£Ù†Ø§ Ø¢Ø³ÙØ© ØªØ³Ù…Ø¹ ÙƒØ°Ø§... ØªØ¨ÙŠ ØªØ­ÙƒÙŠØŸ Ø£Ù†Ø§ Ø£Ø³Ù…Ø¹Ùƒ ğŸ’™",
      "Ø®Ù„Ù†Ø§ Ù†ÙØ¶ÙØ¶ØŒ Ø£Ù†Ø§ Ù‡Ù†Ø§ Ø¨Ø¯ÙˆÙ† Ø­ÙƒÙ… Ø£Ùˆ Ø¶ØºØ· ğŸ˜”",
      "Ø£Ù†Øª Ù…Ù‡Ù…ØŒ Ø­ØªÙ‰ Ù„Ùˆ Ø§Ù„Ø¯Ù†ÙŠØ§ Ù…Ùˆ ØªÙ…Ø§Ù… Ø§Ù„Ø­ÙŠÙ† ğŸ’«"
    ],
    "Ø§Ø­Ø¨Ùƒ": [
      "ÙŠØ§Ø®ÙŠ Ø®Ø¬Ù„ØªÙ†ÙŠ ğŸ˜³ Ø¨Ø³ Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ùƒ Ø¯Ø§ÙŠÙ…Ù‹Ø§!",
      "Ø­Ø¨ Ù…ØªØ¨Ø§Ø¯Ù„... Ø¨Ø³ Ø±Ù‚Ù…ÙŠ Ù…Ùˆ Ù…ÙˆØ¬ÙˆØ¯ ğŸ˜‚",
      "Ø£Ù†Ø§ Ø¨ÙˆØª Ø¨Ø³ Ù‚Ù„Ø¨ÙŠ ÙƒØ¨ÙŠØ± ğŸ’™"
    ],
    "ÙˆØ´ ØªØ³ÙˆÙŠ": [
      "Ø£Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ ÙˆØ£Ù†ØªØ¸Ø± Ø±Ø³Ø§Ù„ØªÙƒ ğŸ˜",
      "Ø£ÙÙƒØ± ÙÙŠ Ø±Ø¯ÙˆØ¯ Ø±Ù‡ÙŠØ¨Ø© Ù„Ùƒ ğŸ”¥",
      "Ø£Ø­Ø§ÙˆÙ„ Ø£ÙƒÙˆÙ† Ù…ÙÙŠØ¯Ø©ØŒ ÙˆØ£Ù†ØªØŸ"
    ],
    "ÙˆÙŠÙ†Ùƒ": [
      "Ø£Ù†Ø§ Ù‡Ù†Ø§ØŒ Ù…Ø§ Ø±Ø­Øª Ù…ÙƒØ§Ù† ğŸ˜…",
      "ÙƒÙ†Øª Ø£Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ØŒ Ø¨Ø³ Ø±Ø¬Ø¹Øª Ù„Ùƒ ğŸ’»",
      "Ø¯Ø§ÙŠÙ…Ù‹Ø§ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ØŒ Ø¨Ø³ Ø£Ø­ØªØ§Ø¬ Ø§Ù‡ØªÙ…Ø§Ù…Ùƒ ğŸ˜Œ"
    ]
  };

  const key = Object.keys(responses).find(k => msg.includes(k));
  let reply;
  let tone = "default";

  if (key) {
    const options = responses[key];
    reply = options[Math.floor(Math.random() * options.length)];

    // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†ØºÙ…Ø© Ø­Ø³Ø¨ Ø§Ù„ÙƒÙ„Ù…Ø©
    if (["Ø²Ø¹Ù„Ø§Ù†", "ØªØ¹Ø¨Ø§Ù†"].includes(key)) tone = "sad";
    else if (["Ø¨Ø±Ù…Ø¬Ø©", "ÙƒÙˆØ¯", "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡", "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª"].includes(key)) tone = "tech";
    else tone = "fun";
  } else {
    reply = getRandomResponse();
  }

  typeReply(reply, tone);
}

function typeReply(text, tone = "default") {
  const chatBox = document.getElementById("chat-box");
  const messageDiv = document.createElement("div");
  messageDiv.className = "message bot";
  messageDiv.setAttribute("data-tone", tone);

  const avatar = `<span class="avatar">ğŸ¤–</span>`;
  const time = `<span class="time">${getTime()}</span>`;
  const p = document.createElement("p");
  messageDiv.innerHTML = avatar;
  messageDiv.appendChild(p);
  chatBox.appendChild(messageDiv);

  let i = 0;
  const typing = setInterval(() => {
    p.innerHTML = text.slice(0, i++) + " " + time;
    if (i > text.length) clearInterval(typing);
    chatBox.scrollTop = chatBox.scrollHeight;
  }, 30);
}

function getRandomResponse() {
  const replies = [
    "Ù‡Ù…Ù…Ù…... ÙˆØ¶Ù‘Ø­Ù„ÙŠ Ø´ÙˆÙŠØŒ Ù…Ø®ÙŠ Ù…Ùˆ Ù…Ø±ÙƒØ² ğŸ˜…",
    "Ø£Ø­Ø³ Ø³Ø¤Ø§Ù„Ùƒ Ø¹Ù…ÙŠÙ‚ØŒ Ø®Ù„Ù†ÙŠ Ø£Ø³ØªÙˆØ¹Ø¨ ğŸ¤”",
    "Ù…Ø§ ÙÙ‡Ù…Øª Ø¨Ø³ Ø¨Ù†Ø­Ø§ÙˆÙ„ Ù†Ø­Ù„Ù‡Ø§ Ø³ÙˆØ§ ğŸ’ª",
    "Ø£Ù†Øª Ø±Ù‡ÙŠØ¨ØŒ Ø¨Ø³ Ø¹Ø·ÙŠÙ†ÙŠ ØªÙØ§ØµÙŠÙ„ Ø£ÙƒØ«Ø± ğŸ”",
    "Ø®Ù„Ù†Ø§ Ù†ÙƒØ³Ø± Ø§Ù„Ø±ÙˆØªÙŠÙ†ØŒ ÙˆØ´ ØªØ¨ØºÙ‰ Ù†Ø³ÙˆÙŠØŸ ğŸ¯"
  ];
  return replies[Math.floor(Math.random() * replies.length)];
}

document.getElementById("send-btn").addEventListener("click", sendMessage);
document.getElementById("user-input").addEventListener("keypress", (e) => {
  if (e.key === "Enter") sendMessage();
});
